{"openapi":"3.0.0","paths":{"/user/create":{"post":{"operationId":"UserController_createUser","summary":"Create a new user with images","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"user":{"type":"object"},"images":{"type":"array","items":{"type":"string","format":"binary"}}}}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPublicDTO"}}}}},"tags":["User"]}},"/user/{id}":{"put":{"operationId":"UserController_updateUser","summary":"Update an existing user","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"user":{"type":"object"},"images":{"type":"array","items":{"type":"string","format":"binary"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPublicDTO"}}}}},"tags":["User"]},"get":{"operationId":"UserController_getUser","summary":"Get a user by ID","parameters":[{"name":"id","required":true,"in":"path","description":"User ID","schema":{"type":"number"}}],"responses":{"200":{"description":"The user has been successfully retrieved.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"User not found."}},"tags":["User"]}},"/api/push-token":{"post":{"operationId":"PushNotificationController_storePushToken","summary":"Store user's push token","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorePushTokenDto"}}}},"responses":{"201":{"description":"The push token has been successfully stored."},"400":{"description":"Bad Request."},"401":{"description":"Unauthorized."},"500":{"description":"Internal server error."}},"tags":["Push Notifications"],"security":[{"bearer":[]}]}},"/user-reports":{"post":{"operationId":"UserReportController_create","summary":"Create a new user report","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserReportDto"}}}},"responses":{"201":{"description":"The report has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserReport"}}}}},"tags":["user-reports"]},"get":{"operationId":"UserReportController_findAll","summary":"Get all user reports","parameters":[],"responses":{"200":{"description":"Return all user reports.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserReport"}}}}}},"tags":["user-reports"]}},"/user-reports/{id}":{"get":{"operationId":"UserReportController_findOne","summary":"Get a user report by id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Return the user report.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserReport"}}}},"404":{"description":"User report not found."}},"tags":["user-reports"]}},"/main":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}}}}},"info":{"title":"Offlinery","description":"API of Offlinery","version":"1","contact":{}},"tags":[{"name":"app","description":""}],"servers":[{"url":"https://offlinery.onrender.com/v1"}],"components":{"schemas":{"UserPublicDTO":{"type":"object","properties":{"id":{"type":"number","description":"The unique identifier of the user"},"isActive":{"type":"boolean","description":"Indicates if the user account is active"},"firstName":{"type":"string","description":"The first name of the user"},"wantsEmailUpdates":{"type":"boolean","description":"Indicates if the user wants to receive email updates"},"birthDay":{"format":"date-time","type":"string","description":"The birth date of the user"},"gender":{"enum":["woman","man"],"type":"string","description":"The gender of the user"},"genderDesire":{"enum":["woman","man"],"type":"string","description":"The gender the user is interested in"},"images":{"type":"array","items":{"type":"object","properties":{"filename":{"type":"string"},"mimetype":{"type":"string"}}},"description":"Array of user images (excluding sensitive path information)"},"verificationStatus":{"enum":["verified","pending","not_needed"],"type":"string","description":"The verification status of the user"},"approachChoice":{"enum":["approach","be_approached","both"],"type":"string","description":"The approach choice of the user"},"approachFromTime":{"format":"date-time","type":"string","description":"The time from which the user can be approached"},"approachToTime":{"format":"date-time","type":"string","description":"The time until which the user can be approached"},"bio":{"type":"string","description":"The user's bio"},"dateMode":{"enum":["ghost","live"],"type":"string","description":"The date mode of the user"}},"required":["id","isActive","firstName","wantsEmailUpdates","birthDay","gender","genderDesire","images","verificationStatus","approachChoice","approachFromTime","approachToTime","bio","dateMode"]},"UserReport":{"type":"object","properties":{"id":{"type":"number"},"incidentDescription":{"type":"string"},"keepReporterInTheLoop":{"type":"boolean"},"incidentType":{"enum":["Disrespectful","Sexual harassment","Violent behavior","Other"],"type":"string"},"reportedOn":{"format":"date-time","type":"string"},"reportedUser":{"$ref":"#/components/schemas/User"},"reportingUser":{"$ref":"#/components/schemas/User"}},"required":["id","incidentDescription","keepReporterInTheLoop","incidentType","reportedOn","reportedUser","reportingUser"]},"User":{"type":"object","properties":{"id":{"type":"number"},"isActive":{"type":"boolean"},"firstName":{"type":"string"},"wantsEmailUpdates":{"type":"boolean"},"email":{"type":"string"},"passwordHash":{"type":"string"},"passwordSalt":{"type":"string"},"birthDay":{"format":"date-time","type":"string"},"gender":{"enum":["woman","man"],"type":"string"},"genderDesire":{"enum":["woman","man"],"type":"string"},"images":{"type":"array","items":{"type":"string"}},"verificationStatus":{"enum":["verified","pending","not_needed"],"type":"string"},"approachChoice":{"enum":["approach","be_approached","both"],"type":"string"},"blacklistedRegions":{"type":"array","items":{"$ref":"#/components/schemas/BlacklistedRegion"}},"approachFromTime":{"format":"date-time","type":"string"},"approachToTime":{"format":"date-time","type":"string"},"bio":{"type":"string"},"dateMode":{"enum":["ghost","live"],"type":"string"},"pushToken":{"type":"string"},"receivedReports":{"type":"array","items":{"$ref":"#/components/schemas/UserReport"}},"issuedReports":{"type":"array","items":{"$ref":"#/components/schemas/UserReport"}}},"required":["id","isActive","firstName","wantsEmailUpdates","email","passwordHash","passwordSalt","birthDay","gender","genderDesire","images","verificationStatus","approachChoice","blacklistedRegions","approachFromTime","approachToTime","bio","dateMode","pushToken","receivedReports","issuedReports"]},"BlacklistedRegion":{"type":"object","properties":{"id":{"type":"number"},"latitude":{"type":"number"},"longitude":{"type":"number"},"radius":{"type":"number"},"user":{"$ref":"#/components/schemas/User"}},"required":["id","latitude","longitude","radius","user"]},"StorePushTokenDto":{"type":"object","properties":{"userId":{"type":"number","description":"The unique identifier of the user","example":"user123"},"pushToken":{"type":"string","description":"The Expo push token for the user's device","example":"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]"}},"required":["userId","pushToken"]},"CreateUserReportDto":{"type":"object","properties":{"incidentDescription":{"type":"string","description":"The description of the incident","example":"The user was being disrespectful in chat"},"keepReporterInTheLoop":{"type":"boolean","description":"Whether to keep the reporter updated on the report status","example":true},"incidentType":{"enum":["Disrespectful","Sexual harassment","Violent behavior","Other"],"type":"string","description":"The type of incident","example":"Disrespectful"},"reportedUserId":{"type":"number","description":"The ID of the user being reported","example":1},"reportingUserId":{"type":"number","description":"The ID of the user making the report","example":2}},"required":["incidentDescription","keepReporterInTheLoop","incidentType","reportedUserId","reportingUserId"]}}}}